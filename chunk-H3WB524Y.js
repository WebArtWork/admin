import{e as S}from"./chunk-SQDWIGYC.js";import{$a as w,C as s,E as h,Ea as b,F as _,Ia as g,J as v,O as y,Oa as a,Sa as C,Ta as k,Ua as j,Wa as l,gb as P,ib as I,l as d,m as f,o as m}from"./chunk-3KY4TGUC.js";var M={formId:"commerceproduct",title:"Product",components:[{name:"Text",key:"name",focused:!0,fields:[{name:"Placeholder",value:"fill product name"},{name:"Label",value:"Name"}]},{name:"Photo",key:"thumb",fields:[{name:"Label",value:"Thumb"}]},{name:"Text",key:"description",fields:[{name:"Placeholder",value:"fill product description"},{name:"Label",value:"Description"}]},{name:"Number",key:"price",fields:[{name:"Placeholder",value:"fill product price"},{name:"Label",value:"Price"}]},{name:"Select",key:"priceType",fields:[{name:"Placeholder",value:"fill product price type"},{name:"Label",value:"Price Type"},{name:"Items",value:["kg","gm","piece","dozen","pack","slice","box","tray"]}]}]};var T=(()=>{class o extends C{constructor(r,t,e,c){super({name:"commerceproduct"},r,t,e,c),this.commerceproducts=this.getDocs(),this.commerceproductsByCommerce={},this.get(),c.on("wipe").subscribe(this.get.bind(this)),this.filteredDocuments(this.commerceproductsByCommerce,"commerce")}static{this.\u0275fac=function(t){return new(t||o)(m(j),m(k),m(l),m(a))}}static{this.\u0275prov=d({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var u=(()=>{class o{get rows(){return this.commerce?this._cps.commerceproductsByCommerce[this.commerce]||[]:this._cps.commerceproducts}constructor(r,t,e,c,p,F){this._cps=r,this._translate=t,this._alert=e,this._form=c,this._core=p,this._router=F,this.commerce=this._router.url.includes("/products/")?this._router.url.replace("/products/",""):"",this.columns=["name","price"],this.form=this._form.getForm("commerceproduct",M),this.config={create:()=>{this._form.modal(this.form,{label:"Create",click:(i,n)=>{this.commerce&&(i.commerce=this.commerce),this._cps.create(i),n()}})},update:i=>{this._form.modal(this.form,[],i).then(n=>{console.log(n),console.log(i),this._core.copy(n,i),console.log(i),this._cps.update(i)})},delete:i=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this commerceproduct?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._cps.delete(i)}}]})},headerButtons:[{icon:"playlist_add",click:this._bulkManagement(),class:"playlist"},{icon:"edit_note",click:this._bulkManagement(!1),class:"edit"}],buttons:[{icon:"cloud_download",click:i=>{this._form.modalUnique("commerceproduct","url",i)}}]}}_bulkManagement(r=!0){return()=>{this._form.modalDocs(r?[]:this.rows).then(t=>{if(r)for(let e of t)this.commerce&&(e.commerce=this.commerce),this._cps.create(e);else{for(let e of this.rows)t.find(c=>c._id===e._id)||this._cps.delete(e);for(let e of t){let c=this.rows.find(p=>p._id===e._id);c?(this._core.copy(e,c),this._cps.update(c)):(this.commerce&&(e.commerce=this.commerce),this._cps.create(e))}}})}}static{this.\u0275fac=function(t){return new(t||o)(s(T),s(w),s(l),s(I),s(a),s(b))}}static{this.\u0275cmp=h({type:o,selectors:[["ng-component"]],standalone:!1,decls:1,vars:3,consts:[["title","Products",3,"columns","config","rows"]],template:function(t,e){t&1&&y(0,"wtable",0),t&2&&v("columns",e.columns)("config",e.config)("rows",e.rows)},dependencies:[P],encapsulation:2})}}return o})();var N=[{path:"",component:u},{path:":commerce_id",component:u}],K=(()=>{class o{static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275mod=_({type:o})}static{this.\u0275inj=f({imports:[g.forChild(N),S]})}}return o})();export{K as CommerceproductModule};
