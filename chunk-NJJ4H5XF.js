import{e as k}from"./chunk-SQDWIGYC.js";import{$a as b,C as a,E as h,F as u,Ia as C,J as _,O as v,Oa as c,Sa as S,Ta as y,Ua as g,Wa as l,gb as j,ib as w,l as f,m as d,o as n}from"./chunk-3KY4TGUC.js";var I={formId:"parse",title:"Parse",components:[{name:"Text",key:"name",focused:!0,fields:[{name:"Placeholder",value:"fill parse title"},{name:"Label",value:"Title"}]},{name:"Text",key:"description",fields:[{name:"Placeholder",value:"fill parse description"},{name:"Label",value:"Description"}]}]};var P=(()=>{class i extends S{constructor(r,t,e,s){super({name:"parse"},r,t,e,s),this.parses=this.getDocs(),this.parsesByAuthor={},this.get(),this.filteredDocuments(this.parsesByAuthor)}static{this.\u0275fac=function(t){return new(t||i)(n(g),n(y),n(l),n(c))}}static{this.\u0275prov=f({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var x=(()=>{class i{get rows(){return this._parseService.parses}constructor(r,t,e,s,m){this._translate=r,this._parseService=t,this._alert=e,this._form=s,this._core=m,this.columns=["name","description"],this.form=this._form.getForm("parse",I),this.config={create:()=>{this._form.modal(this.form,{label:"Create",click:(o,p)=>{this._preCreate(o),this._parseService.create(o),p()}})},update:o=>{this._form.modal(this.form,[],o).then(p=>{this._core.copy(p,o),this._parseService.update(o)})},delete:o=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this parse?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._parseService.delete(o)}}]})},buttons:[{icon:"cloud_download",click:o=>{this._form.modalUnique("parse","url",o)}}],headerButtons:[{icon:"playlist_add",click:this._bulkManagement(),class:"playlist"},{icon:"edit_note",click:this._bulkManagement(!1),class:"edit"}]}}_bulkManagement(r=!0){return()=>{this._form.modalDocs(r?[]:this.rows).then(t=>{if(r)for(let e of t)this._preCreate(e),this._parseService.create(e);else{for(let e of this.rows)t.find(s=>s._id===e._id)||this._parseService.delete(e);for(let e of t){let s=this.rows.find(m=>m._id===e._id);s?(this._core.copy(e,s),this._parseService.update(s)):(this._preCreate(e),this._parseService.create(e))}}})}}_preCreate(r){r.__created}static{this.\u0275fac=function(t){return new(t||i)(a(b),a(P),a(l),a(w),a(c))}}static{this.\u0275cmp=h({type:i,selectors:[["ng-component"]],standalone:!1,decls:1,vars:3,consts:[["title","Parses",3,"columns","config","rows"]],template:function(t,e){t&1&&v(0,"wtable",0),t&2&&_("columns",e.columns)("config",e.config)("rows",e.rows)},dependencies:[j],encapsulation:2})}}return i})();var T=[{path:"",component:x}],E=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({imports:[C.forChild(T),k]})}}return i})();export{E as ParsesModule};
